<!DOCTYPE html>
<!--
  ~ Project Puerto Rico
  ~ Copyright (C) 2017  Thomas PÃ¶tzsch, Stephan Stroh
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title id="pageTitle" th:inline="text">PPR - Detail page for [[${operation.title}]]</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="resources/css/list.css"/>
</head>
<body>
<div th:replace="fragments/template :: login"></div>
<h3>Operation Details:</h3>
<table style="width:100%">
    <tr>
        <th>Title</th>
        <td th:text="${operation.title}"></td>
    </tr>
    <tr>
        <th>Date</th>
        <td th:text="${operation.date}"></td>
    </tr>
    <tr>
        <th>Location</th>
        <td th:text="${operation.location}"></td>
    </tr>
    <tr>
        <th>Organizer</th>
        <td>
            <a th:text="${operation.userByOrganizerId.userdataByUserdataId.firstname +' '+ operation.userByOrganizerId.userdataByUserdataId.lastname}"
               th:href="@{/detailUser(id=${operation.userByOrganizerId.userdataByUserdataId.id})}">details</a></td>
    </tr>
    <tr>
        <th>Public description</th>
        <td th:text="${operation.publicdescription}"></td>
    </tr>
    <tr>
        <th>Private Description</th>
        <td th:text="${operation.privatedescription}"></td>
    </tr>
</table>
<br/>
<h3>Equipment:</h3>
<table style="width:100%">
    <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Apply</th>
    </tr>
    <tr th:each="equipment : ${operation.getEquipmentById()}">
        <td th:text="${equipment.title}"></td>
        <td th:text="${equipment.description}"></td>
        <td th:with="operationparticipation=${equipment.operationparticipationForUsername('user')}">
            <div th:if="${operationparticipation}">
                <div th:if="${operationparticipation.accepted}">
                    <span>Accepted</span>
                </div>
                <div th:if="${operationparticipation.declined}">
                    <span>Declined</span>
                </div>
                <div th:unless="${operationparticipation.accepted}">
                    <div th:unless="${operationparticipation.declined}">
                        <span>Applied</span>
                    </div>
                </div>
            </div>
            <div th:unless="${operationparticipation}">
                <a th:href="@{/applyforequipment(userId=${101}, equipmentId=${equipment.id}, operationId=${operation.id})}">Apply</a>
            </div>
        </td>
    </tr>
</table>
<br/>
<h3>Helpers:</h3>
<table style="width:100%">
    <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Apply</th>
    </tr>
    <tr th:each="helper : ${operation.getHelpersById()}">
        <td th:text="${helper.title}"></td>
        <td th:text="${helper.description}"></td>
        <td th:with="operationparticipation=${helper.operationparticipationForUsername('user')}">
            <div th:if="${operationparticipation}">
                <div th:if="${operationparticipation.accepted}">
                    <span>Accepted</span>
                </div>
                <div th:if="${operationparticipation.declined}">
                    <span>Declined</span>
                </div>
                <div th:unless="${operationparticipation.accepted}">
                    <div th:unless="${operationparticipation.declined}">
                        <span>Applied</span>
                    </div>
                </div>
            </div>
            <div th:unless="${operationparticipation}">
                <a th:href="@{/applyforhelper(userId=${101}, helperId=${helper.id}, operationId=${operation.id})}">Apply</a>
            </div>
        </td>
    </tr>
</table>
</body>
</html>
